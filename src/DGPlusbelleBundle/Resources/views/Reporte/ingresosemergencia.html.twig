{% extends 'DGPlusbelleBundle:Layout:layout.html.twig' %}

{% block contenido -%}


        <div class="content-body">
          <div class="panel" data-fill-color="true">
            <div class="panel-heading">
              <div class="panel-control pull-right">
                <a href="#" class="btn btn-icon" data-toggle="panel-expand" rel="tooltip" data-placement="bottom" title="expand"><i class="arrow_expand"></i></a>
                <a href="#" class="btn btn-icon" data-toggle="panel-collapse" rel="tooltip" data-placement="bottom" title="collapse"><i class="icon_minus_alt2"></i></a>
              </div>
              <h3 class="panel-title">Ingresos por consultas de emergencias</h3>
            </div><!-- /.panel-heading -->

            <div class="panel-body">
                <div class="btn-toolbar clearfix" role="toolbar">
               
                
                <div class="btn-group btn-group-sm pull-left">
                    
                    <button id="exportar-pdf" data-toggle="tooltip" data-container="body" title="Exportar a PDF" class="btn btn-default datatables1-actions opciones" role="button">
                        <i class="fa fa-file-pdf-o"></i><a href=""> </a>
                    </button>
                </div>
                
                <div class="btn-group pull-left">
                  {#<input id="filterDatatables1" class="form-control input-sm" placeholder="Buscar...">#}
                    
                    <input id="fecha-inicio" class="form-control input-sm" placeholder="Fecha inicio...">
                    {#<input id="fecha-fin" class="form-control input-sm" placeholder="Fecha fin...">#}

                </div>
                    <div class="btn-group pull-left">
                  {#<input id="filterDatatables1" class="form-control input-sm" placeholder="Buscar...">#}
                    
                    {#<input id="fecha-inicio" class="form-control input-sm" placeholder="Fecha inicio...">#}
                    <input id="fecha-fin" class="form-control input-sm" placeholder="Fecha fin...">

                </div>
                
                </div><!-- /btn-toolbar -->
                <div class="row">
                    <div class="col-md-12" style="margin-top: 50px;">
                      
                      <canvas id="myChart" width="900" height="400"></canvas>
                    </div>
                  

                </div>
                
                <div id="contenedorGrafico">  
                </div>
            </div><!-- /.panel-body -->

            
            
    


    </div><!-- /.panel -->    
       
</div>
   

     
  
   {% endblock %}
   
    
       
  {% block javascripts_step %}
        <script type="text/javascript" src="{{ asset('Resources/zebra/inicializacioncalendarios.js')}}" ></script>
        <script>
        $(document).ready(function(){
                
        var anioInicioUser = $('#fecha-inicio').val();
        var aniofinUser = $('#fecha-fin').val();
        var url = "{{ path('admin_reporte_emergencia_grafico') }}";
            if(anioInicioUser!=""){
                if(aniofinUser!=""){
                    url+="?anioInicioUser="+anioInicioUser+"&anioFinUser="+aniofinUser;
                    $('#contenedorGrafico').load(url);
                }
            }       

        var datepickerInicio = $('#fecha-inicio').data('Zebra_DatePicker');
        var datepickerFin= $('#fecha-fin').data('Zebra_DatePicker');
        datepickerInicio.update({
            onSelect: function(){
                    $('#fecha-fin').val('');
                    anioInicioUser = $('#fecha-inicio').val();
                                            
            }
        });  
        
        datepickerFin.update({
            onSelect: function(){   
                if(anioInicioUser!==""){
                    var aniofinUser = $('#fecha-fin').val();
                    var url = "{{ path('admin_reporte_emergencia_grafico') }}";
                    url+="?anioInicioUser="+anioInicioUser+"&anioFinUser="+aniofinUser;
                    $('#contenedorGrafico').load(url);
                        //myLineChart.update();    
                }
            }
        });  
                      
    });//Fin document ready
        
    
        </script>

    {% endblock %} 
